{% extends 'base.html' %}
{% block title %}Transferencias{% endblock %}
{% block content %}
<div class="container mt-4">
  <h2 class="text-center mb-3">ðŸ“¦ Transferencias de Productos</h2>
  <table class="table table-striped">
    <thead class="table-dark">
      <tr>
        <th>Producto</th>
        <th>Origen</th>
        <th>Destino</th>
        <th>Cantidad</th>
        <th>Estado</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      {% for t in transferencias %}
      <tr>
        <td>{{ t.producto.nombre }}</td>
        <td>{{ t.sucursal_origen.nombre }}</td>
        <td>{{ t.sucursal_destino.nombre }}</td>
        <td>{{ t.cantidad }}</td>
        <td>{{ t.estado|capfirst }}</td>
        <td>
          {% if user.rol == 'vendedor' and user.sucursal == t.sucursal_destino and t.estado == 'pendiente' %}
            <a href="{% url 'actualizar_transferencia' t.id 'aceptar' %}" class="btn btn-success btn-sm">Aceptar</a>
            <a href="{% url 'actualizar_transferencia' t.id 'rechazar' %}" class="btn btn-danger btn-sm">Rechazar</a>
          {% else %}
            <span class="text-muted">-</span>
          {% endif %}
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="6" class="text-center">No hay transferencias registradas.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
